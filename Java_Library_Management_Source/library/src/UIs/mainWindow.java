/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package UIs;

import Classes.Amanat;
import Classes.Book;
import Classes.Jarime;
import Classes.MyDate;
import Classes.Rezerv;
import Classes.User;
import Classes.showMessage;
import DataAcces.DataAcces;
import javax.swing.table.DefaultTableModel;
import Tools.Tools;
/**
 *
 * @author mad
 */
public class mainWindow extends javax.swing.JFrame {
    
    String[][] data;
    String[] colNames;
    
    User curUser;
    
    public mainWindow() {
        initComponents();
        Tools.setWindowsStyleAndLoaction(this);
        loadBooks();
        checkAmanat();
        jPControl.setVisible(false);
        jMModir.setVisible(false); // مدیریت
        jMIAmanatDadan.setVisible(false); // پاپ آپ منو امانت دادن
        jMAmanat.setVisible(false); // منوی امانات
        jMRezerv.setVisible(false);
        jMJarime.setVisible(false);
        jMGhanoon.setVisible(false);
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jPopupMenu1 = new javax.swing.JPopupMenu();
        jMIAmanatDadan = new javax.swing.JMenuItem();
        jMIRezerv = new javax.swing.JMenuItem();
        jScrollPane1 = new javax.swing.JScrollPane();
        jTable1 = new javax.swing.JTable();
        jLabel1 = new javax.swing.JLabel();
        jTSearch = new javax.swing.JTextField();
        jBShowAll = new javax.swing.JButton();
        jBSearch = new javax.swing.JButton();
        jComboBox1 = new javax.swing.JComboBox();
        jLWelcome = new javax.swing.JLabel();
        jPControl = new javax.swing.JPanel();
        jBLogOut = new javax.swing.JButton();
        jLabel3 = new javax.swing.JLabel();
        jLabel4 = new javax.swing.JLabel();
        jLFamil = new javax.swing.JLabel();
        jLabel8 = new javax.swing.JLabel();
        jLDastresi = new javax.swing.JLabel();
        jLSemat = new javax.swing.JLabel();
        jLabel7 = new javax.swing.JLabel();
        jLNam = new javax.swing.JLabel();
        jMenuBar1 = new javax.swing.JMenuBar();
        jMenu1 = new javax.swing.JMenu();
        jMenuItem1 = new javax.swing.JMenuItem();
        jSeparator1 = new javax.swing.JPopupMenu.Separator();
        jMenuItem2 = new javax.swing.JMenuItem();
        jMModir = new javax.swing.JMenu();
        jMUser = new javax.swing.JMenu();
        jMIAddUser = new javax.swing.JMenuItem();
        jMIEditUser = new javax.swing.JMenuItem();
        jMMember = new javax.swing.JMenu();
        jMIAddMember = new javax.swing.JMenuItem();
        jMIEditMember = new javax.swing.JMenuItem();
        jMBook = new javax.swing.JMenu();
        jMIAddBook = new javax.swing.JMenuItem();
        jMIEditBook = new javax.swing.JMenuItem();
        jMAmanat = new javax.swing.JMenu();
        jMIAmanatdadan = new javax.swing.JMenuItem();
        jMIBargashtAm = new javax.swing.JMenuItem();
        jMINamaieshAm = new javax.swing.JMenuItem();
        jMRezerv = new javax.swing.JMenu();
        jMenuItem3 = new javax.swing.JMenuItem();
        jMJarime = new javax.swing.JMenu();
        jMAddNjarime = new javax.swing.JMenuItem();
        jMShowNjarime = new javax.swing.JMenuItem();
        jMAddjarime = new javax.swing.JMenuItem();
        jMShowjarime = new javax.swing.JMenuItem();
        jMGhanoon = new javax.swing.JMenu();
        jMenuItem4 = new javax.swing.JMenuItem();
        jMenuItem5 = new javax.swing.JMenuItem();

        jMIAmanatDadan.setText("امانت دادن");
        jMIAmanatDadan.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jMIAmanatDadanActionPerformed(evt);
            }
        });
        jPopupMenu1.add(jMIAmanatDadan);

        jMIRezerv.setText("رزرو کتاب");
        jMIRezerv.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jMIRezervActionPerformed(evt);
            }
        });
        jPopupMenu1.add(jMIRezerv);

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        jTable1.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null, null, null, null, null, null, null, null, null, null, null, null, null},
                {null, null, null, null, null, null, null, null, null, null, null, null, null},
                {null, null, null, null, null, null, null, null, null, null, null, null, null},
                {null, null, null, null, null, null, null, null, null, null, null, null, null}
            },
            new String [] {
                "شماره ثیت", "سال نشر", "عنوان", "نویسنده", "ناشر", "محل نشر", "زبان", "ارزش", "شابک", "خلاصه", "موضوع", "جلد", "تعداد"
            }
        ));
        jTable1.setComponentPopupMenu(jPopupMenu1);
        jScrollPane1.setViewportView(jTable1);

        jLabel1.setText("جستجو:");

        jTSearch.setHorizontalAlignment(javax.swing.JTextField.RIGHT);

        jBShowAll.setText("نمایش همه");
        jBShowAll.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jBShowAllActionPerformed(evt);
            }
        });

        jBSearch.setText("بگرد");
        jBSearch.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jBSearchActionPerformed(evt);
            }
        });

        jComboBox1.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "عنوان", "نویسنده", "زبان", "موضوع" }));
        jComboBox1.setSelectedIndex(-1);

        jLWelcome.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLWelcome.setText("شما کاربر عادی هستید");

        jPControl.setBorder(javax.swing.BorderFactory.createTitledBorder(null, "پنل کاربری", javax.swing.border.TitledBorder.RIGHT, javax.swing.border.TitledBorder.DEFAULT_POSITION));

        jBLogOut.setText("خروج");
        jBLogOut.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jBLogOutActionPerformed(evt);
            }
        });

        jLabel3.setText("نام:");

        jLabel4.setText("نام خانوادگی:");

        jLFamil.setText("jLabel6");

        jLabel8.setText("سططح دسترسی:");

        jLDastresi.setText("jLabel10");

        jLSemat.setText("jLabel9");

        jLabel7.setText("سمت:");

        jLNam.setText("jLabel5");

        javax.swing.GroupLayout jPControlLayout = new javax.swing.GroupLayout(jPControl);
        jPControl.setLayout(jPControlLayout);
        jPControlLayout.setHorizontalGroup(
            jPControlLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPControlLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jBLogOut, javax.swing.GroupLayout.PREFERRED_SIZE, 80, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addGroup(jPControlLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(jLDastresi)
                    .addComponent(jLSemat))
                .addGap(27, 27, 27)
                .addGroup(jPControlLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jLabel7, javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(jLabel8, javax.swing.GroupLayout.Alignment.TRAILING))
                .addGap(30, 30, 30)
                .addGroup(jPControlLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jLNam, javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(jLFamil, javax.swing.GroupLayout.Alignment.TRAILING))
                .addGap(33, 33, 33)
                .addGroup(jPControlLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jLabel3, javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(jLabel4, javax.swing.GroupLayout.Alignment.TRAILING))
                .addContainerGap())
        );
        jPControlLayout.setVerticalGroup(
            jPControlLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPControlLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPControlLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPControlLayout.createSequentialGroup()
                        .addGroup(jPControlLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jLabel3)
                            .addComponent(jLNam)
                            .addComponent(jLabel7)
                            .addComponent(jLSemat))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(jPControlLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jLabel4)
                            .addComponent(jLFamil)
                            .addComponent(jLabel8)
                            .addComponent(jLDastresi))
                        .addGap(0, 3, Short.MAX_VALUE))
                    .addComponent(jBLogOut, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addContainerGap())
        );

        jMenu1.setText("منوی اصلی");

        jMenuItem1.setText("ورود");
        jMenuItem1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jMenuItem1ActionPerformed(evt);
            }
        });
        jMenu1.add(jMenuItem1);
        jMenu1.add(jSeparator1);

        jMenuItem2.setText("بستن");
        jMenuItem2.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jMenuItem2ActionPerformed(evt);
            }
        });
        jMenu1.add(jMenuItem2);

        jMenuBar1.add(jMenu1);

        jMModir.setText("مدیریت");

        jMUser.setText("کاربر");

        jMIAddUser.setText("اضافه کردن");
        jMIAddUser.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jMIAddUserActionPerformed(evt);
            }
        });
        jMUser.add(jMIAddUser);

        jMIEditUser.setText("ویرایش");
        jMIEditUser.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jMIEditUserActionPerformed(evt);
            }
        });
        jMUser.add(jMIEditUser);

        jMModir.add(jMUser);

        jMMember.setText("عضو");

        jMIAddMember.setText("اضافه کردن");
        jMIAddMember.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jMIAddMemberActionPerformed(evt);
            }
        });
        jMMember.add(jMIAddMember);

        jMIEditMember.setText("ویرایش");
        jMIEditMember.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jMIEditMemberActionPerformed(evt);
            }
        });
        jMMember.add(jMIEditMember);

        jMModir.add(jMMember);

        jMBook.setText("کتاب");

        jMIAddBook.setText("اضافه کردن");
        jMIAddBook.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jMIAddBookActionPerformed(evt);
            }
        });
        jMBook.add(jMIAddBook);

        jMIEditBook.setText("ویرایش");
        jMIEditBook.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jMIEditBookActionPerformed(evt);
            }
        });
        jMBook.add(jMIEditBook);

        jMModir.add(jMBook);

        jMenuBar1.add(jMModir);

        jMAmanat.setText("امانات");

        jMIAmanatdadan.setText("امانت دادن");
        jMIAmanatdadan.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jMIAmanatdadanActionPerformed(evt);
            }
        });
        jMAmanat.add(jMIAmanatdadan);

        jMIBargashtAm.setText("برگشت امانت");
        jMIBargashtAm.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jMIBargashtAmActionPerformed(evt);
            }
        });
        jMAmanat.add(jMIBargashtAm);

        jMINamaieshAm.setText("نمایش جدول امانت");
        jMINamaieshAm.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jMINamaieshAmActionPerformed(evt);
            }
        });
        jMAmanat.add(jMINamaieshAm);

        jMenuBar1.add(jMAmanat);

        jMRezerv.setText("رزرو");

        jMenuItem3.setText("نمایش جدول رزرو");
        jMenuItem3.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jMenuItem3ActionPerformed(evt);
            }
        });
        jMRezerv.add(jMenuItem3);

        jMenuBar1.add(jMRezerv);

        jMJarime.setText("جریمه");

        jMAddNjarime.setText("تعریف جریمه جدید");
        jMAddNjarime.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jMAddNjarimeActionPerformed(evt);
            }
        });
        jMJarime.add(jMAddNjarime);

        jMShowNjarime.setText("مشاهده نوع جریمه ها");
        jMShowNjarime.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jMShowNjarimeActionPerformed(evt);
            }
        });
        jMJarime.add(jMShowNjarime);

        jMAddjarime.setText("اعمال جریمه");
        jMAddjarime.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jMAddjarimeActionPerformed(evt);
            }
        });
        jMJarime.add(jMAddjarime);

        jMShowjarime.setText("مشاهده عضو های جریمه شده");
        jMShowjarime.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jMShowjarimeActionPerformed(evt);
            }
        });
        jMJarime.add(jMShowjarime);

        jMenuBar1.add(jMJarime);

        jMGhanoon.setText("قانون");

        jMenuItem4.setText("تعریف قانون جدید");
        jMenuItem4.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jMenuItem4ActionPerformed(evt);
            }
        });
        jMGhanoon.add(jMenuItem4);

        jMenuItem5.setText("مشاهده ی قانون های");
        jMenuItem5.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jMenuItem5ActionPerformed(evt);
            }
        });
        jMGhanoon.add(jMenuItem5);

        jMenuBar1.add(jMGhanoon);

        setJMenuBar(jMenuBar1);

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jScrollPane1)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(jBShowAll)
                        .addGap(18, 18, 18)
                        .addComponent(jBSearch, javax.swing.GroupLayout.PREFERRED_SIZE, 78, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(18, 18, 18)
                        .addComponent(jTSearch, javax.swing.GroupLayout.DEFAULT_SIZE, 325, Short.MAX_VALUE))
                    .addComponent(jPControl, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addGap(18, 18, 18)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                    .addComponent(jLWelcome, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(jComboBox1, javax.swing.GroupLayout.PREFERRED_SIZE, 112, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(18, 18, 18)
                        .addComponent(jLabel1)))
                .addContainerGap())
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                .addGap(2, 2, 2)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(jPControl, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(jLWelcome, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel1)
                    .addComponent(jTSearch, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jBShowAll)
                    .addComponent(jBSearch)
                    .addComponent(jComboBox1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addComponent(jScrollPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 374, Short.MAX_VALUE))
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void jMenuItem1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jMenuItem1ActionPerformed
        LogIn log = new LogIn(this, true);
        log.setVisible(true);
        if (log.getUser() != null) {
            curUser = log.getUser();
            logedIn();
            enables();
            showMessage.information("با موفقیت وارد شدید.");
           jMenuItem1.setVisible(false);
        }

    }//GEN-LAST:event_jMenuItem1ActionPerformed

    private void jMIAddUserActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jMIAddUserActionPerformed
        new addUser(true).setVisible(true);
    }//GEN-LAST:event_jMIAddUserActionPerformed

    private void jMIEditUserActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jMIEditUserActionPerformed
        new showData(this, false, showData.USER).setVisible(true);
    }//GEN-LAST:event_jMIEditUserActionPerformed

    private void jMIAddMemberActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jMIAddMemberActionPerformed
        new addMember(true).setVisible(true);
    }//GEN-LAST:event_jMIAddMemberActionPerformed

    private void jMIEditMemberActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jMIEditMemberActionPerformed
        new showData(this, false, showData.MEMBER).setVisible(true);
    }//GEN-LAST:event_jMIEditMemberActionPerformed

    private void jMIAddBookActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jMIAddBookActionPerformed
        new addBook(true).setVisible(true);
    }//GEN-LAST:event_jMIAddBookActionPerformed

    private void jMIEditBookActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jMIEditBookActionPerformed
        new showData(this, false, showData.BOOK).setVisible(true);
    }//GEN-LAST:event_jMIEditBookActionPerformed

    private void jBSearchActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jBSearchActionPerformed
        String sql, searchBy = searchBy();
        sql = "select * from ROOT.BOOK b"
                + " where b.%s = '%s'";
        sql = String.format(sql, searchBy, jTSearch.getText());
        
        DataAcces da = new DataAcces(sql);
        this.data = da.getData();
        updateTable();
    }//GEN-LAST:event_jBSearchActionPerformed

    private void jBShowAllActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jBShowAllActionPerformed
        loadBooks();
    }//GEN-LAST:event_jBShowAllActionPerformed

    private void jBLogOutActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jBLogOutActionPerformed
        logedMeOut();
        disables();
    }//GEN-LAST:event_jBLogOutActionPerformed

    private void jMIAmanatDadanActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jMIAmanatDadanActionPerformed
        MyDate today = new MyDate();
        Amanat amanat = new Amanat(curUser.getKod(), 0,
                Integer.parseInt((String) jTable1.getModel()
                        .getValueAt(jTable1.getSelectedRow(),
                                Book.BookIndex.SABT.getCode())),
                today.getIranianDate().replace('/', '-'), null);
        AmanatFrom amanatForm = new AmanatFrom(this, true, amanat, true);
        amanatForm.setVisible(true);
    }//GEN-LAST:event_jMIAmanatDadanActionPerformed

    private void jMenuItem2ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jMenuItem2ActionPerformed
        System.exit(0);
    }//GEN-LAST:event_jMenuItem2ActionPerformed

    private void jMIAmanatdadanActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jMIAmanatdadanActionPerformed
        AmanatFrom amanatFrom = new AmanatFrom(this, true, null, true);
        amanatFrom.setVisible(true);
    }//GEN-LAST:event_jMIAmanatdadanActionPerformed

    private void jMIBargashtAmActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jMIBargashtAmActionPerformed
        jMINamaieshAmActionPerformed(null);
    }//GEN-LAST:event_jMIBargashtAmActionPerformed

    private void jMINamaieshAmActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jMINamaieshAmActionPerformed
        showData showAmanat = new showData(this, true, showData.AMANAT);
        showAmanat.setVisible(true);
    }//GEN-LAST:event_jMINamaieshAmActionPerformed

    private void jMIRezervActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jMIRezervActionPerformed
        Rezerv rezerv = new Rezerv(0,
                Integer.parseInt((String) jTable1.getModel()
                        .getValueAt(jTable1.getSelectedRow(),
                                Book.BookIndex.SABT.getCode())),
                new MyDate().getIranianDate().replace('/', '-'),
                null);
        RezervForm rezFrom = new RezervForm(this, true, rezerv, true);
        rezFrom.setVisible(true);
    }//GEN-LAST:event_jMIRezervActionPerformed

    private void jMenuItem3ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jMenuItem3ActionPerformed
        showData showRezerv = new showData(this, true, showData.REZERV);
        showRezerv.setVisible(true);
    }//GEN-LAST:event_jMenuItem3ActionPerformed

    private void jMAddNjarimeActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jMAddNjarimeActionPerformed
        new NJarimeForm(this, true, true).setVisible(true);
    }//GEN-LAST:event_jMAddNjarimeActionPerformed

    private void jMShowNjarimeActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jMShowNjarimeActionPerformed
        new showData(this, true, showData.NJARIME).setVisible(true);
    }//GEN-LAST:event_jMShowNjarimeActionPerformed

    private void jMShowjarimeActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jMShowjarimeActionPerformed
        new showData(this, true, showData.JARIME).setVisible(true);
    }//GEN-LAST:event_jMShowjarimeActionPerformed

    private void jMAddjarimeActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jMAddjarimeActionPerformed
        new JarimeFrom(this, true).setVisible(true);
    }//GEN-LAST:event_jMAddjarimeActionPerformed

    private void jMenuItem4ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jMenuItem4ActionPerformed
        new GhanoonForm(this, true, true).setVisible(true);
    }//GEN-LAST:event_jMenuItem4ActionPerformed

    private void jMenuItem5ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jMenuItem5ActionPerformed
        new showData(this, true, showData.GHANOON).setVisible(true);
    }//GEN-LAST:event_jMenuItem5ActionPerformed
//
//    /**
//     * @param args the command line arguments
//     */
//    public static void main(String args[]) {
//        /* Set the Nimbus look and feel */
//        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
//        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
//         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
//         */
//        try {
//            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
//                if ("Nimbus".equals(info.getName())) {
//                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
//                    break;
//                }
//            }
//        } catch (ClassNotFoundException ex) {
//            java.util.logging.Logger.getLogger(mainWindow.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
//        } catch (InstantiationException ex) {
//            java.util.logging.Logger.getLogger(mainWindow.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
//        } catch (IllegalAccessException ex) {
//            java.util.logging.Logger.getLogger(mainWindow.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
//        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
//            java.util.logging.Logger.getLogger(mainWindow.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
//        }
//        //</editor-fold>
//
//        /* Create and display the form */
//        java.awt.EventQueue.invokeLater(new Runnable() {
//            public void run() {
//                new mainWindow().setVisible(true);
//            }
//        });
//    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton jBLogOut;
    private javax.swing.JButton jBSearch;
    private javax.swing.JButton jBShowAll;
    private javax.swing.JComboBox jComboBox1;
    private javax.swing.JLabel jLDastresi;
    private javax.swing.JLabel jLFamil;
    private javax.swing.JLabel jLNam;
    private javax.swing.JLabel jLSemat;
    private javax.swing.JLabel jLWelcome;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabel7;
    private javax.swing.JLabel jLabel8;
    private javax.swing.JMenuItem jMAddNjarime;
    private javax.swing.JMenuItem jMAddjarime;
    private javax.swing.JMenu jMAmanat;
    private javax.swing.JMenu jMBook;
    private javax.swing.JMenu jMGhanoon;
    private javax.swing.JMenuItem jMIAddBook;
    private javax.swing.JMenuItem jMIAddMember;
    private javax.swing.JMenuItem jMIAddUser;
    private javax.swing.JMenuItem jMIAmanatDadan;
    private javax.swing.JMenuItem jMIAmanatdadan;
    private javax.swing.JMenuItem jMIBargashtAm;
    private javax.swing.JMenuItem jMIEditBook;
    private javax.swing.JMenuItem jMIEditMember;
    private javax.swing.JMenuItem jMIEditUser;
    private javax.swing.JMenuItem jMINamaieshAm;
    private javax.swing.JMenuItem jMIRezerv;
    private javax.swing.JMenu jMJarime;
    private javax.swing.JMenu jMMember;
    private javax.swing.JMenu jMModir;
    private javax.swing.JMenu jMRezerv;
    private javax.swing.JMenuItem jMShowNjarime;
    private javax.swing.JMenuItem jMShowjarime;
    private javax.swing.JMenu jMUser;
    private javax.swing.JMenu jMenu1;
    private javax.swing.JMenuBar jMenuBar1;
    private javax.swing.JMenuItem jMenuItem1;
    private javax.swing.JMenuItem jMenuItem2;
    private javax.swing.JMenuItem jMenuItem3;
    private javax.swing.JMenuItem jMenuItem4;
    private javax.swing.JMenuItem jMenuItem5;
    private javax.swing.JPanel jPControl;
    private javax.swing.JPopupMenu jPopupMenu1;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JPopupMenu.Separator jSeparator1;
    private javax.swing.JTextField jTSearch;
    private javax.swing.JTable jTable1;
    // End of variables declaration//GEN-END:variables

    public void loadBooks() {
        DataAcces da = new DataAcces("select * from ROOT.BOOK");
        data = da.getData();
        colNames = new String[]{
            "شماره ثیت", "سال نشر", "عنوان", "نویسنده", "ناشر",
            "محل نشر", "زبان", "ارزش", "شابک", "خلاصه", "موضوع",
            "جلد", "تعداد"
        };
        updateTable();
    }
    
    public void updateTable() {
        jTable1.setModel(new DefaultTableModel(data, colNames));
        jScrollPane1.setViewportView(jTable1);
    }
    
    private String searchBy() {
        switch (jComboBox1.getSelectedIndex()) {
            case 0:
                return "BONVAN";
            case 1:
                return "BNEVISANDE";
            case 2:
                return "BZABAN";
            default:
                return "BMOZO";
        }
    }
    
    private void logedIn() {
        jPControl.setVisible(true);
        jLNam.setText(curUser.getNam());
        jLFamil.setText(curUser.getFamil());
        jLSemat.setText(curUser.getSemat());
        jLDastresi.setText("" + curUser.getDastresi());
        jLWelcome.setText(curUser.getNam() + " خوش آمدید.");
    }
    
    private void logedMeOut() {
        jPControl.setVisible(false);
        curUser = null;
        jLWelcome.setText("با موفقیت خارج شدید.");
    }
    
    private void enables() {
        jMModir.setVisible(true);
        jMIAmanatDadan.setVisible(true); // پاپ آپ منو امانت دادن
        jMAmanat.setVisible(true); // فعال کردن منوی امانات
        jMRezerv.setVisible(true);
        jMJarime.setVisible(true);
        switch (curUser.getDastresi()) {
            case 1:
                jMGhanoon.setVisible(true);
                break;
            case 2:
                jMUser.setVisible(false);
                break;
            case 3:
                jMUser.setVisible(false);
                jMIEditMember.setVisible(false);
                jMRezerv.setVisible(false);
                jMAddNjarime.setVisible(false);
                jMShowNjarime.setVisible(false);
                break;
        }
    }
    
    private void disables() {
        jMModir.setVisible(false);
        jMIAmanatDadan.setVisible(false); // پاپ آپ منو امانت دادن
        jMUser.setVisible(true);
        jMIEditMember.setVisible(true);
        jMRezerv.setVisible(false);
        jMAmanat.setVisible(false);
        jMAddNjarime.setVisible(true);
        jMShowNjarime.setVisible(true);
        jMJarime.setVisible(false);
        jMGhanoon.setVisible(false);
        jMenuItem1.setVisible(true);
    }

    private void checkAmanat() {
        DataAcces da = new DataAcces("select * from ROOT.AMANAT");
        String [][] data = da.getData();
        String today = new MyDate().getIranianDate().replace('/', '-');
        for (int i = 0; i < data.length; i++) {
            if (data[i][AmanatIndex.RETDATE.getCode()].equals(today)) {
                Jarime jarime = new Jarime(
                        Integer.parseInt(data[i][AmanatIndex.MID.getCode()]),
                        today,
                        11,
                        Integer.parseInt(data[i][AmanatIndex.UKOD.getCode()]));
                jarime.insertJarime();
            }
        }
    }
    
    public enum AmanatIndex {

        UKOD(0), MID(1), BSABT(2), DATE(3), RETDATE(4);

        private final int code;

        private AmanatIndex(int code) {
            this.code = code;
        }

        public int getCode() {
            return code;
        }
    }
}
